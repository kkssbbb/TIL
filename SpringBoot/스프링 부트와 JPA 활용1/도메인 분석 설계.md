# ëª©ì°¨
- ğŸ“Œìš”êµ¬ì‚¬í•­ ë¶„ì„
- ğŸ“Œë„ë©”ì¸ ëª¨ë¸ë  í…Œì´ë¸” ì„¤ê³„
- ğŸ“Œì—”í‹°í‹° í´ë˜ìŠ¤ ê°œë°œ1
- ğŸ“Œì—”í‹°í‹° í´ë˜ìŠ¤ ê°œë°œ2
- ğŸ“Œì—”í‹°í‹° ì„¤ê³„ì‹œ ì£¼ì˜ì 

<br>
<br>
<br>
<br>


# ğŸ“Œìš”êµ¬ì‚¬í•­ ë¶„ì„
## ì‹¤ì œ ë™ì‘ í™”ë©´
![ì‹¤ì œ ë™ì‘ í™”ë©´](https://user-images.githubusercontent.com/89888075/170435106-23a493b9-7be8-412b-be6f-56810db5350f.PNG)

<br>
<br>

## ê¸°ëŠ¥ ëª©ë¡
- íšŒì› ê¸°ëŠ¥
    - íšŒì› ë“±ë¡
    - íšŒì› ì¡°íšŒ
- ìƒí’ˆ ê¸°ëŠ¥
    - ìƒí’ˆ ë“±ë¡
    - ìƒí’ˆ ìˆ˜ì •
    - ìƒí’ˆ ì¡°íšŒ
- ì£¼ë¬¸ ê¸°ëŠ¥
    - ìƒí’ˆ ì£¼ë¬¸
    - ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ
    - ì£¼ë¬¸ ì·¨ì†Œ
- ê¸°íƒ€ ìš”êµ¬ì‚¬í•­
    - ìƒí’ˆì€ ì¬ê³  ê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤.
    - ìƒí’ˆì˜ ì¢…ë¥˜ëŠ” ë„ì„œ, ìŒë°˜, ì˜í™”ê°€ ìˆë‹¤.
    - ìƒí’ˆì„ ì¹´í…Œê³ ë¦¬ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.
    - ìƒí’ˆ ì£¼ë¬¸ì‹œ ë°°ì†¡ ì •ë³´ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆë‹¤.

<br>
<br>
<br>
<br>

# ğŸ“Œë„ë©”ì¸ ëª¨ë¸ê³¼ í…Œì´ë¸” ì„¤ê³„
![ë„ë©”ì¸ëª¨ë¸ê³¼ í…Œì´ë¸” ì„¤ê³„](https://user-images.githubusercontent.com/89888075/170666473-467824a9-e24a-4476-840f-e51ce400afae.png)

### íšŒì›, ì£¼ë¬¸ , ìƒí’ˆì˜ ê´€ê³„
- **íšŒì›&ì£¼ë¬¸ = 1:1**
    - íšŒì›ì€ ì—¬ëŸ¬ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
- **ì£¼ë¬¸&ì£¼ë¬¸ìƒí’ˆ = many:many**
    - ì£¼ë¬¸ì„ í•  ë•Œ ì—¬ëŸ¬ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤. ë˜
     ìƒí’ˆì„ ì£¼ë¬¸í•  ë•Œ ì—¬ëŸ¬ ì£¼ë¬¸ì„ í• ìˆ˜ìˆì–´ì„œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ê°€ëœë‹¤. í•˜ì§€ë§Œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ ë¬´ê²°ì„±ì„ í•´ì¹˜ê¸°ë•Œë¬¸ì— ì—”í‹°í‹°ë¥¼ ì¶”ê°€í•´ì„œ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ë¡œ í’€ì–´ë‚´ëŠ”ê²Œ ë³´í†µì´ë‹¤.
- **ìƒí’ˆë¶„ë¥˜**
    - ì‹±í’ˆë¶„ë¥˜ëŠ” ë„ì„œ,ìŒë°˜,ì˜í™”ë¡œ êµ¬ë¶„í•˜ë©° ìƒí’ˆì´ë¼ëŠ” ê³µí†µ ì†ì„±ì„ ê°–ê³ ìˆì–´ ìƒì† êµ¬ì¡°ë¡œ í‘œí˜„ í•œë‹¤.

### ì§‘ì ‘ì ì¸ ë‹¤ëŒ€ë‹¤ ê´€ê³„ëŠ” í”¼í•´ì•¼ í•˜ëŠ” ì´ìœ 
- ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ì˜ ë¬´ê²°ì„±ì„ ìœ„ë°˜í•˜ê²Œë˜ì–´ ë°ì´í„°ì˜ ì‚­ì œì™€ ì¶”ê°€,ìˆ˜ì •ì„ í•  ë•Œ ë§ì€ ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ë”°ë¼ì„œ ì—°ê²° í…Œì´ë¸”ì„ ë‘ì–´ ë°ì´í„°ì˜ ì¶”ê°€, ìˆ˜ì •,ì‚­ì œì— ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆë‹¤.
<br>
<br>

## íšŒì› ì—”í‹°í‹° ë¶„ì„
![íšŒì› ì—”í‹°í‹° ë¶„ì„](https://user-images.githubusercontent.com/89888075/170672338-6a365333-a87a-4fca-8025-4ba6b1897e50.PNG)

### Member(íšŒì›)
- ìŠ¤íŠ¸ë§íƒ€ì…ì˜ ì´ë¦„, ì„ë² ë””ë“œ íƒ€ì…ì˜ Adress,ë¦¬ìŠ¤íŠ¸íƒ€ì…ì˜ ì£¼ë¬¸ì„ ê°–ëŠ”ë‹¤.
### Order(ì£¼ë¬¸)
- Memberíƒ€ì…ì˜ member,Listíƒ€ì…ì˜ orderItems, Deliveryíƒ€ì…ì˜ delivery,Dataíƒ€ì…ì˜orderData, OrderSatusíƒ€ì…ì˜ statusê°€ìˆê³  ì£¼ë¬¸ìƒíƒœëŠ” ì—´ê±°í˜•ì„ ì‚¬ìš©í•´ ì£¼ë¬¸(ORDER),ì·¨ì†Œ(CANCEL)ì„ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.<br>
ì£¼ë¬¸ì€ ìƒí’ˆê³¼ ë‹¤ëŒ€ë‹¤ ê´€ê³„ì´ê¸°ë–„ë¬¸ì— ì¤‘ê°„ì— ì—°ê²°í…Œì´ë¸”ì„ ë‘ì–´ ì£¼ë¬¸ì•„ì´í…œí…Œì´ë¸”ë¡œ ì¼ëŒ€ ë‹¤ ê´€ê³„ì´ë‹¤.
### OrderItem(ì£¼ë¬¸ìƒí’ˆ)
- ì£¼ë¬¸ ìƒí’ˆì •ë³´ì™€ ì£¼ë¬¸ê¸ˆì•¡(orderPrice),ì£¼ë¬¸ìˆ˜ëŸ‰(count)ì •ë³´ë¥¼ ê°–ê³  ìˆë‹¤.
### Item(ìƒí’ˆ)
- ì´ë¦„,ê°€ê²©,stockQuntityë¥¼ ê°–ê³  ìˆë‹¤.
### Delivery(ë°°ì†¡)
- ì£¼ë¬¸ì‹œ í•˜ë‚˜ì˜ ë°°ì†¡ì •ë³´ ìƒì„±. ì£¼ë¬¸ê³¼ ë°°ì†¡ì€ ì¼ëŒ€ì¼ ê´€ê³„
### CateGory(ì¹´í…Œê³ ë¦¬)
- ìƒí’ˆê³¼ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ë§ºëŠ”ë‹¤.(ë‹¤ëŒ€ë‹¤ëŠ” ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ ì˜ˆë¥¼ ìœ„í•´ ì‚¬ìš©)parent , child ë¡œ ë¶€ëª¨, ìì‹ ì¹´í…Œê³ ë¦¬ë¥¼ ì—°ê²°í•œ
ë‹¤.
### Address(ì£¼ì†Œ)
- ê°’ íƒ€ì…(ì„ë² ë””ë“œ íƒ€ì…)ì´ë‹¤. íšŒì›ê³¼ ë°°ì†¡(Delivery)ì—ì„œ ì‚¬ìš©í•œë‹¤
<br>
<br>

## í…Œì´ë¸”
![í…Œì´ë¸” ë¶„ì„](https://user-images.githubusercontent.com/89888075/170677397-3495d0fe-059d-49bf-ba2d-ecd161ed0817.PNG)

### **íšŒì› ì£¼ë¬¸**
- ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ì˜ ì–‘ë°©í–¥ê´€ê³„ì´ë‹¤. ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ì£¼ë¬¸ì„ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•˜ëŠ”ê²ƒì´ ì¢‹ê¸°ë•Œë¬¸ì— ì£¼ë¬¸ì— ì—°ê´€ê´€ê³„ë¥¼ ì •í–ˆë‹¤.
ë˜ ì¼ëŒ€ë‹¤ ê´€ê³„ì—ì„  ë¬´ì¡°ê±´ ë‹¤ì— í¬ë§í‚¤ê°€ ìˆê²Œëœë‹¤.(ì£¼ë¬¸ì— ë©¤ë²„ë¥¼ ê°–ê³ ìˆê¸°ë–„ë¬¸ì— ë©¤ë²„ëŠ” ì¡°íšŒìš©ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.)
### **ì£¼ë¬¸ìƒí’ˆ ì£¼ë¬¸**
- ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ê´€ê³„ì´ë‹¤. ì™¸ë˜ í‚¤ê°€ ì£¼ë¬¸ìƒí’ˆì—ìˆì–´ ì£¼ë¬¸ìƒí’ˆì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ë©° OrderItem.order ë¥¼ ORDER_ITEM.ORDER_ID ì™¸ë˜ í‚¤ì™€ ë§¤í•‘í•œë‹¤.
### **ì£¼ë¬¸ìƒí’ˆ ìƒí’ˆ**
- ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ ê´€ê³„ë‹¤. OrderItem.item ì„ ORDER_ITEM.ITEM_ID ì™¸ë˜ í‚¤ì™€ ë§¤í•‘í•œ
ë‹¤
### **ì£¼ë¬¸ ë°°ì†¡**
-  ì¼ëŒ€ì¼ ì–‘ë°©í–¥ ê´€ê³„ë‹¤. Order.delivery ë¥¼ ORDERS.DELIVERY_ID ì™¸ë˜ í‚¤ì™€ ë§¤í•‘í•œë‹¤
### **ì¹´í…Œê³ ë¦¬ ìƒí’ˆ**
- : @ManyToMany ë¥¼ ì‚¬ìš©í•´ì„œ ë§¤í•‘í•œë‹¤.(ì‹¤ë¬´ì—ì„œ @ManyToManyëŠ” ì‚¬ìš©í•˜ì§€ ë§ì. ì—¬ê¸°
ì„œëŠ” ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì˜ˆì œë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ì¶”ê°€í–ˆì„ ë¿ì´ë‹¤


<br>
<br>
<br>
<br>

# ğŸ“Œì—”í‹°í‹° í´ë˜ìŠ¤ ê°œë°œ
## íšŒì› ì—”í‹°í‹°
~~~java
package jpabook.jpashop.domain;

import lombok.Getter;
import lombok.Setter;

import javax.persistence.*;
import java.util.ArrayList;
import java.util.List;


@Entity
@Getter @Setter
public class Member {

    @Id @GeneratedValue
    @Column(name= "member_id")
    private Long id;

    private String name;

    @Embedded //ë‚´ì¥íƒ€ì… ì‚¬ìš©í–ˆë‹¤ëŠ” í‘œì‹œ
    private Address address;

    @OneToMany(mappedBy = "member") // mappedBy = "member" = orderì—ìˆëŠ” pkì¸ memberë¥¼ ì½ê¸°ë§Œí•˜ê³  Memberì—ì„œ ìˆ˜ì •ì´ ì´ëŸ¬ë‚˜ì§„ ì•ŠëŠ”ë‹¤ëŠ” ëœ»
    private List<Order> orders = new ArrayList<>();


}

~~~

-  @Column(name= "member_id") = pk ì¹¼ëŸ¼ëª… <br>
    ì—”í‹°í‹° íƒ€ì…ì´ ì´ë¯¸ Memberì´ë¯€ë¡œ í…Œì´ë¸” íƒ€ì…ì´ ì—†ìœ¼ë©´ êµ¬ë¶„ ì´ì–´ë ¤ì›Œ ê´€ë¡€ìƒ í…Œì´ë¸”ëª…+idë¥¼ ë§ì´ ì‚¬ìš©í•˜ì—¬"member_id"ë¥¼ ì‚¬ìš© í–ˆë‹¤.

## ì£¼ë¬¸ ì—”í‹°í‹°
~~~java
package jpabook.jpashop.domain;


import lombok.Getter;
import lombok.Setter;


import javax.persistence.Column;
import javax.persistence.*;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;

@Entity
@Table(name = "orders")
@Getter @Setter
public class Order {

    @Id @GeneratedValue
    @Column(name = "order_id")
    private Long id;

    @ManyToOne
    @JoinColumn(name = "member_id") //í¬ë§í‚¤ ì´ë¦„
    private Member member;

    @OneToMany(mappedBy = "order")
    private List<OrderItem> orderItems = new ArrayList<>();

    @OneToOne
    @JoinColumn(name = "delivety_id")
    private Delivery delivery;

    private LocalDateTime orderData; //ì£¼ë¬¸ì‹œê°„

    @Enumerated(EnumType.STRING)
    private OrderStatus status; //ì£¼ë¬¸ìƒíƒœ [ORDER, CANCEL]
}

~~~

## ì£¼ë¬¸ ìƒíƒœ
~~~java
package jpabook.jpashop.domain;

public enum OrderStatus {
    ORDER, CANCEL
}

~~~

## ì£¼ë¬¸ìƒí’ˆ ì—”í‹°í‹°
~~~java
package jpabook.jpashop.domain;

import jpabook.jpashop.domain.item.Item;
import lombok.Getter;
import lombok.Setter;

import javax.persistence.*;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;

@Entity
@Getter
@Setter
public class OrderItem {

    @Id @GeneratedValue
    @Column(name = "order_item_id")
    private Long id;

    @ManyToOne
    @JoinColumn(name = "item_id")
    private Item item;

    @ManyToOne
    @JoinColumn(name = "order_id") //ì™¸ë˜í‚¤ ë§µí•‘
    private Order order;

    private int orderPrice; // ì£¼ë¬¸ê°€ê²©

    private int count; //ì£¼ë¬¸ ìˆ˜ëŸ‰

}

~~~

## ìƒí’ˆ ì—”í‹°í‹°
~~~java
package jpabook.jpashop.domain.item;

import jpabook.jpashop.domain.Category;
import lombok.Getter;
import lombok.Setter;

import javax.persistence.Entity;
import javax.persistence.*;
import java.util.ArrayList;
import java.util.List;

@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "dtype")
@Getter @Setter
public abstract class Item {

    @Id @GeneratedValue
    @Column(name = "item_id")
    private Long id;

    private String name;

    private int price;

    private int stockQuantity;

    @ManyToMany(mappedBy = "items")
    private List<Category> categories = new ArrayList<>();
}

~~~

## ìƒí’ˆ-ë„ì„œ ì—”í‹°í‹°
~~~java
package jpabook.jpashop.domain.item;

import lombok.Getter;
import lombok.Setter;

import javax.persistence.DiscriminatorValue;
import javax.persistence.Entity;

@Entity
@DiscriminatorValue("B")
@Getter@Setter
public class Book extends Item{

    private String author;
    private String isbn;



}

~~~

## ìƒí’ˆ-ìŒë°˜ ì—”í‹°í‹°
~~~java
package jpabook.jpashop.domain.item;

import lombok.Getter;
import lombok.Setter;

import javax.persistence.DiscriminatorValue;
import javax.persistence.Entity;

@Entity
@DiscriminatorValue("A")
@Getter
@Setter
public class Album extends Item{

    private String artist;
    private String etc;
}

~~~

## ìƒí’ˆ-ì˜í™” ì—”í‹°í‹°
~~~java
package jpabook.jpashop.domain.item;

import lombok.Getter;
import lombok.Setter;

import javax.persistence.DiscriminatorValue;
import javax.persistence.Entity;

@Entity
@DiscriminatorValue("M")
@Getter
@Setter
public class Movie extends Item{
    private String director;
    private String actor;
}

~~~

## ë°°ì†¡ ì—”í‹°í‹°
~~~java
package jpabook.jpashop.domain;

import lombok.Getter;
import lombok.Setter;

import javax.persistence.Entity;
import javax.persistence.*;

@Entity
@Getter @Setter
public class Delivery {

    @Id @GeneratedValue
    @Column(name = "delivery_id")
    private Long id;

    @OneToOne(mappedBy = "delivery")
    private Order order;


    @Embedded
    private Address address;

    @Enumerated(EnumType.STRING)
    private DeliveryStatus status; //READY, COMP

}

~~~

## ë°°ì†¡ ìƒíƒœ
~~~java
package jpabook.jpashop.domain;

public enum DeliveryStatus {
    READY, COMP
}

~~~

## ì¹´í˜ê³ ë¦¬ ì—”í‹°í‹°
~~~java
package jpabook.jpashop.domain;

import jpabook.jpashop.domain.item.Item;
import lombok.Getter;
import lombok.Setter;


import javax.persistence.*;
import java.util.ArrayList;
import java.util.List;

@Entity
@Getter@Setter
public class Category {

    @Id @GeneratedValue
    @Column(name = "category_id")
    private Long id;

    private String name;

    @ManyToMany
    @JoinTable(name = "category_item",  //ì¡°ì¸í…Œì´ë¸” ëª…
        joinColumns = @JoinColumn(name = "category_id"), //í˜„ì¬ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•˜ëŠ” fk
            inverseJoinColumns = @JoinColumn(name = "item_id")) // ë°˜ëŒ€ë°©í–¥ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•˜ëŠ” fk
   private List<Item> items = new ArrayList<>();

    @ManyToOne
    @JoinColumn(name = "parent_id")
    private  Category parent;

    @OneToMany(mappedBy = "parent")
    private  List<Category> child =new ArrayList<>();

    //@JoinColumn(name = "parent_id")


}

~~~

## ì£¼ì†Œ ê°’ íƒ€ì…
~~~java
package jpabook.jpashop.domain;

import lombok.Getter;

import javax.persistence.Embeddable;

@Embeddable
//ìœ ì €í…Œì´ë¸”ì— ì£¼ì†Œë°ì´í„°ë¥¼ í•˜ë‚˜ì˜ ì£¼ì†Œê´€ë ¨ë°ì´í„°ë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ->ìœ ì €í…Œì´ë¸”ì˜ ì•„ë˜ì˜ ë°ì´í„°ë„ ê°™ì´ ìƒì„±ëœë‹¤.
// (ì‚¬ì‹¤@Embeddable ì–´ë…¸í…Œì´ì…˜ì€ ìƒëµí•´ë„ ëœë‹¤.)
@Getter
public class Address {

    private String city;
    private String street;
    private String zipcode;

    protected Address(){}

    public Address(String city, String street, String zipcode){
        this.city = city;
        this.street = street;
        this.zipcode = zipcode;
    }
}

~~~

- ê°’ íƒ€ì…ì€ ë³€ê²½ ë¶ˆê°€ëŠ¥í•˜ê²Œ ì„¤ê³„í•´ì•¼í•œë‹¤.<br>
ìƒì„±ìì—ì„œ ê°’ì„ ëª¨ë‘ ì´ˆê¸°í™”í•´ì„œ ë³€ê²½ ë¶ˆê°€ëŠ¥í•œ í´ë˜ìŠ¤ë¡œ ë§Œë“ ë‹¤, @Setterë¥¼ ì œê±°í•œë‹¤.
- JPA ìŠ¤í™ìƒ ì—”í‹°í‹°ë‚˜ ì„ë² ë””ë“œíƒ€ì…(@Embeddable)ì€ ìë°” ê¸°ë³¸ìƒì„±ìë¥¼ publicë˜ëŠ” protectedë¡œ ì„¤ì •í•´ì•¼í•˜ê³  protectedê°€ ì•ˆì „í•˜ê¸°ë•Œ ë¬¸ì— ë” ê¶Œì¥í•œë‹¤.
- JPA ê°€ ì´ëŸ¬í•œ ì œì•½ì„ ë‘ëŠ” ì´ìœ ëŠ” JPA êµ¬í˜„ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ë¦¬í”Œë™ì…˜ ê°™ì€ ê¸°ìˆ ì„  ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
<br>
<br>
<br>
<br>


# ğŸ“Œì—”í‹°í‹° ì„¤ê³„ì‹œ ì£¼ì˜ì 